import geopandas as gpd
from shapely.geometry import Point
import json
 
# Lista de coordenadas das cidades
coordenadas = [[-64.3077875047, -9.8158852994], [-64.3040500169, -9.8185661905], [-64.2958777087, -9.8169070483], [-64.2876924883, -9.830109491], [-64.2746988857, -9.8417706247], [-64.2660385866, -9.8396306394], [-64.2597050984, -9.8314931759], [-64.2255682664, -9.8474500982], [-64.2184502043, -9.8383733838], [-64.2014893832, -9.833538915], [-64.1842646106, -9.8407888371], [-64.1583231792, -9.822139498], [-64.1384766322, -9.8290908085], [-64.1352571487, -9.8331493911], [-64.084943147, -9.8331493482], [-64.0819644396, -9.8331486276], [-63.9666300091, -9.8331215586], [-63.9444461855, -9.8330948175], [-63.8378537256, -9.8329100197], [-63.7453510357, -9.8327280714], [-63.7445068899, -9.832740461], [-63.6847576529, -9.8325955072], [-63.6863736687, -9.8403800136], [-63.6912320255, -9.8431702195], [-63.6854801008, -9.852504668], [-63.7009178743, -9.8579893703], [-63.6972811652, -9.8753704354], [-63.692646476, -9.8808576245], [-63.7080037806, -9.8841755035], [-63.7170592298, -9.9084454922], [-63.7159150629, -9.9187472186], [-63.7226147885, -9.9213287948], [-63.7176978493, -9.9307385146], [-63.7277595234, -9.9313870693], [-63.7275872168, -9.9375382768], [-63.7308109319, -9.9400940024], [-63.7267833157, -9.9475875002], [-63.7329230511, -9.959478994], [-63.7375047893, -9.9650198548], [-63.744889402, -9.9663842693], [-63.7496400751, -9.9748032724], [-63.7585885525, -9.9798598301], [-63.7608424233, -9.9874486363], [-63.7642570761, -9.9869129768], [-63.7630043601, -9.9914003739], [-63.7579246434, -9.9935797105], [-63.7650852386, -9.9999554054], [-63.7616488889, -9.999956714], [-63.5964380342, -9.999991324], [-63.5828653397, -10.0296657052], [-63.5866460112, -10.040882825], [-63.5855845544, -10.0536192655], [-63.5890912441, -10.0583552366], [-63.5846748775, -10.0746229888], [-63.5868652912, -10.0987787509], [-63.5761815292, -10.115976626], [-63.5811965025, -10.1256149618], [-63.5801655378, -10.1417757366], [-63.5848437805, -10.1598216039], [-63.5814722572, -10.168866917], [-63.5845371067, -10.1824226145], [-63.5820039793, -10.1929483421], [-63.5888094868, -10.2083923871], [-63.5738979211, -10.2174264827], [-63.5646852802, -10.2405054442], [-63.5495637084, -10.2446891663], [-63.5381144396, -10.237757337], [-63.5237698909, -10.2492508792], [-63.6958269333, -10.2486991608], [-63.699768049, -10.2450623598], [-63.7141133337, -10.2463419252], [-63.7152879466, -10.2497057896], [-63.7283900239, -10.244973678], [-63.7324490894, -10.265559566], [-63.7301013852, -10.2820124293], [-63.7393322714, -10.2860336142], [-63.7469498172, -10.2912108843], [-63.7555307989, -10.2904547789], [-63.7617573472, -10.2962649371], [-63.7619259462, -10.3257731569], [-63.7705330662, -10.3255350436], [-63.7789812604, -10.330215506], [-63.7961474705, -10.3241621102], [-63.8113384972, -10.3288544203], [-63.8136991591, -10.3394757802], [-63.8229794699, -10.3514138116], [-63.8386203615, -10.3554986378], [-63.8451477177, -10.3617674214], [-63.853081666, -10.3561431786], [-63.8999250077, -10.3609392614], [-63.8948391661, -10.345786387], [-63.8971921626, -10.3342560573], [-63.8975882409, -10.3277402409], [-63.8970651699, -10.3196215796], [-63.9006743291, -10.3126833429], [-63.8953392766, -10.3063708955], [-63.8943147765, -10.2969852341], [-63.9049472815, -10.2947290992], [-63.9104451355, -10.2868881959], [-63.9309180593, -10.2771852768], [-63.9298374603, -10.2597016185], [-63.9363715535, -10.2502692792], [-63.946649952, -10.2440386238], [-63.9495034202, -10.23654589], [-63.9537031391, -10.2322814525], [-63.9634221594, -10.2329243831], [-63.983724326, -10.2044104486], [-64.0015584041, -10.1933901725], [-64.0058168511, -10.1804302334], [-64.0027007114, -10.1742478453], [-64.0048709881, -10.1692270784], [-64.0271201644, -10.1540789643], [-64.0372806473, -10.1794805011], [-64.040736234, -10.1935135572], [-64.0523655505, -10.2185570409], [-64.0612305203, -10.2503858599], [-64.0913339516, -10.2508314422], [-64.0958598752, -10.2417754533], [-64.1102039861, -10.2429269646], [-64.1142248889, -10.2401326142], [-64.1367293264, -10.2085879022], [-64.153010619, -10.2150408494], [-64.1563956156, -10.2074928298], [-64.1642545571, -10.2038692106], [-64.1898097227, -10.2040714778], [-64.1951752217, -10.1988201227], [-64.2086433594, -10.1959838301], [-64.2279792144, -10.1791864864], [-64.2286353815, -10.1736440117], [-64.2347800904, -10.1649917036], [-64.2279377899, -10.1501708739], [-64.231954851, -10.1420937736], [-64.2293702289, -10.1318082114], [-64.241093357, -10.1190677321], [-64.2405518039, -10.1133592228], [-64.2418688041, -10.0968303359], [-64.2313103899, -10.080605336], [-64.2436764978, -10.0682202487], [-64.2455876952, -10.0600286798], [-64.2423450556, -10.0576257286], [-64.2431416942, -10.0488464849], [-64.2485640573, -10.0436920574], [-64.248201663, -10.0395002432], [-64.2562862811, -10.0357878441], [-64.257555047, -10.0167590079], [-64.2641955821, -10.0000235035], [-64.3384666606, -9.9999933158], [-64.3406311335, -9.9999921112], [-64.3425299601, -9.995562294], [-64.3393711924, -9.9914589562], [-64.3437310633, -9.9899429484], [-64.3458544613, -9.9868009398], [-64.3432020021, -9.9835181881], [-64.3468659806, -9.982129467], [-64.3433832654, -9.9751280547], [-64.3460325072, -9.9674995965], [-64.3413530387, -9.9563648889], [-64.3334856185, -9.9527553074], [-64.3308880011, -9.9311968226], [-64.3268497839, -9.9309872755], [-64.3229496515, -9.9256028445], [-64.3187759814, -9.8962215966], [-64.3228881702, -9.8945123621], [-64.3265750408, -9.8833145076], [-64.3196005612, -9.8769199887], [-64.3227163531, -9.8676155839], [-64.3164639155, -9.8650446086], [-64.3176676663, -9.8602784259], [-64.3116467559, -9.850780642], [-64.29721321, -9.8434271633], [-64.3032242082, -9.8363359142], [-64.3014682147, -9.8315186655], [-64.3083829056, -9.8227051578], [-64.31078644, -9.8122479653], [-64.3077875047, -9.8158852994]]


# Cria um GeoDataFrame a partir das coordenadas das cidades
pontos = [Point(lon, lat) for lon, lat in coordenadas]
gdf = gpd.GeoDataFrame(geometry=pontos)

# Calcula a envoltória convexa (convex hull)
envoltoria_convexa = gdf.geometry.unary_union.convex_hull
coordinates = [list(envoltoria_convexa.exterior.coords)]
print(coordinates)

'''# Cria o dicionário no formato GeoJSON
geojson = {
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "properties": {
                "name": "MR ABELARDO LUZ",
                "description": "MR ABELARDO LUZ"
            },
            "geometry": {
                "type": "Polygon",
                "coordinates": [list(envoltoria_convexa.exterior.coords)]
            }
        }
    ]
}'''

# Exibe o JSON resultante
#print(json.dumps(geojson, indent=2))

# Salva o resultado em um arquivo .json
'''with open('regiao_cidades.json', 'w') as f:
    json.dump(geojson, f, indent=2)
'''