import geopandas as gpd
from shapely.geometry import Point
import json
 
# Lista de coordenadas das cidades
coordenadas =  [[-55.9650504631, -29.35726763], [-55.9574621707, -29.3616632162], [-55.9351965924, -29.3510702907], [-55.9158126544, -29.348602682], [-55.9099144617, -29.3563860243], [-55.9171296189, -29.3645342363], [-55.9184698904, -29.3720135247], [-55.9083236971, -29.387444786], [-55.889665283, -29.3988113392], [-55.8710876867, -29.4200945404], [-55.860440578, -29.4219653767], [-55.8495713318, -29.410799235], [-55.8406833309, -29.4086917799], [-55.835564903, -29.4108133606], [-55.8287384016, -29.4283948387], [-55.8203139513, -29.4295131475], [-55.7917770846, -29.4215840146], [-55.7742945081, -29.4204379419], [-55.7682461032, -29.4359137355], [-55.7506517927, -29.4372113078], [-55.7432751574, -29.445746739], [-55.7418222969, -29.4500085441], [-55.7485365621, -29.4538593928], [-55.7633650146, -29.4497782749], [-55.7704439911, -29.4542806868], [-55.7679277562, -29.4623216046], [-55.7567161285, -29.4722299902], [-55.7665338814, -29.4826014224], [-55.7645108733, -29.4918389186], [-55.7602757153, -29.4940723061], [-55.7363288863, -29.4920066983], [-55.7263766222, -29.4823328484], [-55.7299354286, -29.4627250334], [-55.7271669479, -29.4600974946], [-55.7164403528, -29.4618020016], [-55.7098065667, -29.4821201256], [-55.7104213765, -29.4939792888], [-55.6922224423, -29.4913085691], [-55.6861604499, -29.4966629094], [-55.6875720747, -29.5160443978], [-55.6864059334, -29.5221104398], [-55.6672702404, -29.5127187511], [-55.6674932403, -29.524870831], [-55.658629805, -29.5344423998], [-55.6893783883, -29.5486308454], [-55.6927612743, -29.5584326337], [-55.6887708642, -29.5662645661], [-55.6804847193, -29.5655344227], [-55.6812562994, -29.5546687159], [-55.6774695436, -29.5521369703], [-55.6569585434, -29.5595612796], [-55.6251751638, -29.5607764165], [-55.6158204701, -29.5674126594], [-55.6125453634, -29.579208738], [-55.6072721992, -29.5821571572], [-55.5846751188, -29.5875176503], [-55.5749964695, -29.5950190836], [-55.5502336808, -29.5996752058], [-55.547002592, -29.6023989974], [-55.5488205985, -29.6134703565], [-55.5510006956, -29.617207053], [-55.5340450087, -29.6287979652], [-55.5391400989, -29.6602865434], [-55.5307955576, -29.6648614623], [-55.5129886222, -29.6551106951], [-55.4945259263, -29.6563826011], [-55.4687825903, -29.6467835126], [-55.4556288377, -29.6539388357], [-55.4503086855, -29.6636214146], [-55.4126944282, -29.6600199474], [-55.4152844757, -29.6397450593], [-55.4082364386, -29.6270278122], [-55.4105337799, -29.6196673813], [-55.3999991894, -29.614867493], [-55.3853481371, -29.6167134162], [-55.3775776542, -29.6143913371], [-55.3627709689, -29.614131983], [-55.3378704829, -29.6362945368], [-55.3257172407, -29.6417339714], [-55.3085167618, -29.6307611524], [-55.2923391258, -29.6301358656], [-55.2796852127, -29.6173405191], [-55.2429141201, -29.6198305591], [-55.2350245159, -29.6336440974], [-55.2234081444, -29.630948192], [-55.2119659983, -29.6356788937], [-55.2123007608, -29.6506046266], [-55.1953407438, -29.6654348241], [-55.1936329006, -29.6850912486], [-55.1942343534, -29.6936642192], [-55.1911061865, -29.6962631886], [-55.1421371586, -29.695132957], [-55.1251104134, -29.7004437801], [-55.1285881611, -29.7206272627], [-55.1261837653, -29.7513199316], [-55.1328947156, -29.756094881], [-55.1343291221, -29.7626413216], [-55.1202561323, -29.7680219342], [-55.1236819499, -29.7695930979], [-55.1239060658, -29.7754950421], [-55.1141288943, -29.7781684194], [-55.1154545689, -29.7866454371], [-55.1113887883, -29.7927188225], [-55.1139817177, -29.7983112866], [-55.1109255074, -29.7999363166], [-55.1187951828, -29.807465998], [-55.1239440214, -29.8201617441], [-55.1409568921, -29.821698238], [-55.1487659146, -29.8266485684], [-55.1456543905, -29.8394113179], [-55.1380444202, -29.8476215088], [-55.1400307468, -29.8517537014], [-55.1513647681, -29.8550442806], [-55.1476235291, -29.8683537378], [-55.1513007685, -29.8748018475], [-55.1626949688, -29.8738288221], [-55.1708746145, -29.8799272293], [-55.1778925904, -29.8979943956], [-55.1930356868, -29.9138257325], [-55.2112949982, -29.9220407535], [-55.2214739009, -29.9192751315], [-55.2286241253, -29.9276397321], [-55.2327424445, -29.9480766933], [-55.2438293982, -29.9716535164], [-55.2440876836, -29.9868063563], [-55.2596188708, -30.0024498361], [-55.2583320706, -30.0123470093], [-55.2668311461, -30.0159320581], [-55.2692032304, -30.0367016971], [-55.2688242019, -30.0386094338], [-55.2774286653, -30.0409876742], [-55.2806520745, -30.0516817503], [-55.2929973007, -30.0618615185], [-55.3125602403, -30.0804593343], [-55.3509449891, -30.0773853517], [-55.3571101208, -30.0768907203], [-55.3626493863, -30.0812151383], [-55.3837042416, -30.0742170245], [-55.424766184, -30.0915684597], [-55.4407309618, -30.0931784736], [-55.4488514302, -30.0889249517], [-55.4559376719, -30.0884732497], [-55.4582146328, -30.0833006451], [-55.4636411553, -30.0827415677], [-55.4654594917, -30.0732320173], [-55.4877184065, -30.0880840248], [-55.5005375737, -30.104621291], [-55.49849021, -30.1196626442], [-55.5041466409, -30.1264174517], [-55.5024914816, -30.1337600191], [-55.5062208134, -30.1417660551], [-55.5179885751, -30.1487584071], [-55.5261290714, -30.1505147671], [-55.5287908142, -30.1597410587], [-55.5378978141, -30.1627598029], [-55.5571189157, -30.1538252535], [-55.5935189914, -30.1485677974], [-55.5972662964, -30.1426986819], [-55.6090383253, -30.1422528214], [-55.6375976102, -30.1182836429], [-55.646341528, -30.1187100835], [-55.6458932051, -30.1131401869], [-55.6605549321, -30.1027210259], [-55.6653043053, -30.1055235328], [-55.6709575841, -30.1031988462], [-55.6697111581, -30.1160152171], [-55.671838451, -30.1128081032], [-55.6719622016, -30.1197844428], [-55.6766580293, -30.1197173803], [-55.6671769144, -30.1258301944], [-55.6516450528, -30.1461061104], [-55.6502415824, -30.1512167286], [-55.6572194485, -30.1518232885], [-55.6566123515, -30.1558714071], [-55.6473987934, -30.1613662186], [-55.6564056605, -30.1623856397], [-55.6660372778, -30.1726976367], [-55.6739430013, -30.1725690758], [-55.6720907632, -30.1758358549], [-55.6512424492, -30.1794377307], [-55.6733285415, -30.1981948102], [-55.658710764, -30.2090578455], [-55.643019547, -30.2120890955], [-55.6416009467, -30.2164241783], [-55.6514064476, -30.2302504277], [-55.6672058628, -30.2214699844], [-55.6743082612, -30.2207869439], [-55.6751541469, -30.225828441], [-55.6821865976, -30.2223635831], [-55.6981544018, -30.2297162973], [-55.7101938445, -30.2279941425], [-55.7203532176, -30.2323398664], [-55.735065643, -30.2285367082], [-55.7445596153, -30.2304949007], [-55.7538744364, -30.2205250429], [-55.7516119946, -30.2105094938], [-55.7675443442, -30.168080685], [-55.7759760369, -30.1707283528], [-55.7867688456, -30.1670727438], [-55.7967181602, -30.1715625277], [-55.8051789021, -30.1707303577], [-55.8243839647, -30.1638073744], [-55.8233607975, -30.1570685601], [-55.8452348272, -30.142208088], [-55.8650523759, -30.1339549689], [-55.8727703998, -30.1341111895], [-55.8702874877, -30.1244716398], [-55.8782680946, -30.0999350731], [-55.8744111077, -30.0977779182], [-55.8770620242, -30.0873418511], [-55.8724460827, -30.0773620337], [-55.8739254189, -30.0682855335], [-55.878915111, -30.0701758531], [-55.8939741579, -30.0758795166], [-55.9037063364, -30.0867540096], [-55.9108206565, -30.0854288144], [-55.9270900999, -30.0906257707], [-55.9353767448, -30.0855178318], [-55.9405772548, -30.0840712997], [-55.9453379585, -30.0884640763], [-55.9870494478, -30.0949636666], [-56.0036579325, -30.0818589836], [-56.0112062461, -30.0850371404], [-56.0197047277, -30.080985818], [-56.0295077819, -30.0711026186], [-56.0426697266, -30.047489894], [-56.0819945744, -30.0787995834], [-56.1075441215, -30.0837527589], [-56.1205990992, -30.0796967816], [-56.1466633593, -30.0571669799], [-56.1497107594, -30.0545336463], [-56.1525653079, -30.0533480375], [-56.1550059639, -30.0320948317], [-56.1668047041, -30.0257817262], [-56.1840329602, -30.0009347382], [-56.1969267004, -29.9972818748], [-56.1995722311, -29.9923095894], [-56.2092240084, -29.9922941612], [-56.2220786872, -29.9824165306], [-56.2398063975, -29.9807844774], [-56.2441723647, -29.9761112592], [-56.2467290336, -29.9576467129], [-56.2618245235, -29.9490221518], [-56.2826789627, -29.922354376], [-56.2921376287, -29.8974284845], [-56.3062276751, -29.88075962], [-56.3051341011, -29.8668900587], [-56.3156370051, -29.8589738908], [-56.3504567724, -29.8481504011], [-56.3631066461, -29.8337558934], [-56.371609465, -29.8093534139], [-56.3664359615, -29.7848711857], [-56.3728644051, -29.7556904651], [-56.3707514619, -29.743908362], [-56.382404343, -29.7337143038], [-56.3836449378, -29.728378962], [-56.3942632273, -29.7218861432], [-56.4007146875, -29.7036806636], [-56.3974159026, -29.6906030294], [-56.3915295386, -29.6912630292], [-56.3876577582, -29.6847762938], [-56.3700086, -29.6770259918], [-56.3674703195, -29.6699511515], [-56.3611462342, -29.6696545129], [-56.3696861158, -29.6548623228], [-56.3669955705, -29.6367500277], [-56.3744296436, -29.6291958248], [-56.380963876, -29.6278190223], [-56.3769107223, -29.6164529875], [-56.3833646967, -29.6135887487], [-56.3782211044, -29.5980229967], [-56.3713114849, -29.5951040357], [-56.37771648, -29.5887493994], [-56.3835375986, -29.5925875233], [-56.382219842, -29.5876524379], [-56.3887529885, -29.5868714259], [-56.3916196727, -29.5788087125], [-56.4032750546, -29.5762240963], [-56.408828744, -29.5690105724], [-56.4063566465, -29.5641381451], [-56.410277212, -29.5622013908], [-56.4076141447, -29.5605417542], [-56.4121827531, -29.5586067352], [-56.4217614551, -29.5393453855], [-56.4296489655, -29.5387686621], [-56.4332724421, -29.5422768972], [-56.4371909253, -29.5375557709], [-56.4464948444, -29.5383858476], [-56.451360393, -29.5299678329], [-56.4587703836, -29.5282836775], [-56.4598280403, -29.5317808705], [-56.4665739216, -29.5313024506], [-56.4668241604, -29.5262246854], [-56.462919974, -29.5238010477], [-56.466589101, -29.5221090451], [-56.4643584132, -29.5189573637], [-56.467964897, -29.5133755277], [-56.4635928934, -29.5081011732], [-56.4676917841, -29.504162205], [-56.4596432895, -29.5014626393], [-56.4617047297, -29.4937228151], [-56.4577977664, -29.4907832218], [-56.4626241424, -29.488155634], [-56.4624638048, -29.4824235674], [-56.4734999391, -29.4842830412], [-56.4679936748, -29.4749720404], [-56.4694294692, -29.4696675724], [-56.4717329247, -29.4723336432], [-56.4745198335, -29.4681528511], [-56.4812715743, -29.4702481828], [-56.4822340966, -29.4657369257], [-56.4916278717, -29.4702396652], [-56.4983422534, -29.4654519523], [-56.5002651352, -29.4686764983], [-56.5105969705, -29.4703162163], [-56.5132472133, -29.4781715858], [-56.5143359989, -29.4754043986], [-56.5170806779, -29.477467067], [-56.5223407119, -29.462744411], [-56.5301594409, -29.4611894372], [-56.5357023066, -29.4537936901], [-56.5400098047, -29.453121008], [-56.541228201, -29.4565405001], [-56.5445191734, -29.4497987185], [-56.5585774763, -29.447223817], [-56.5641513059, -29.4536684301], [-56.569641032, -29.448774624], [-56.5742219931, -29.4515977756], [-56.5752191142, -29.4404190844], [-56.5886030399, -29.4481072897], [-56.5913065575, -29.4442622166], [-56.5915118843, -29.448729716], [-56.5943682836, -29.4468040176], [-56.597109623, -29.4492284554], [-56.5973076284, -29.4555012571], [-56.6074533469, -29.4578304811], [-56.6084757892, -29.4535040153], [-56.6124684567, -29.4548856041], [-56.6141363719, -29.4482381347], [-56.6121517213, -29.4459471067], [-56.6065136042, -29.4477364622], [-56.6079524794, -29.443649815], [-56.6142839885, -29.4422146937], [-56.6189863788, -29.4459545043], [-56.626664687, -29.4406908354], [-56.6250916485, -29.4259586046], [-56.6536008029, -29.4262110339], [-56.6599119191, -29.4228707981], [-56.6477857413, -29.4176588768], [-56.6339501592, -29.416568694], [-56.6176128705, -29.4248595496], [-56.6064255945, -29.4219057205], [-56.6037523522, -29.4167552049], [-56.6113295659, -29.3960638199], [-56.6052450079, -29.3911125852], [-56.5969221068, -29.3928131697], [-56.5897543464, -29.405699832], [-56.5761770478, -29.4005769484], [-56.5686243031, -29.3907001624], [-56.5435251703, -29.395706828], [-56.5249947937, -29.3953555769], [-56.5055211017, -29.3872465593], [-56.4843856105, -29.3898168501], [-56.4744628675, -29.4129568806], [-56.4388710384, -29.424774577], [-56.4387736772, -29.4247980005], [-56.422482617, -29.4263124512], [-56.3771659964, -29.4101390288], [-56.3630352524, -29.3972513203], [-56.3190584896, -29.4069104734], [-56.2907608452, -29.4167414166], [-56.2559048858, -29.3992554027], [-56.2225580542, -29.4009462598], [-56.2006190131, -29.3795867883], [-56.1853796918, -29.3788687328], [-56.1760569647, -29.3749429998], [-56.1752773431, -29.3461742602], [-56.1813516502, -29.321653172], [-56.1775031439, -29.3129950951], [-56.1726744527, -29.3109552684], [-56.1485494278, -29.3143179656], [-56.1389515931, -29.3205811936], [-56.1328662219, -29.3267074518], [-56.1188041565, -29.3598339817], [-56.094314273, -29.3692545714], [-56.0851151526, -29.3669257181], [-56.0775007159, -29.3580519068], [-56.0790131823, -29.3338283354], [-56.0570632874, -29.323037247], [-56.0491442949, -29.2969230518], [-56.0338852297, -29.296643898], [-55.9977523472, -29.334608918], [-55.9787021089, -29.3404384126], [-55.9650504631, -29.35726763]]


# Cria um GeoDataFrame a partir das coordenadas das cidades
pontos = [Point(lon, lat) for lon, lat in coordenadas]
gdf = gpd.GeoDataFrame(geometry=pontos)

# Calcula a envoltória convexa (convex hull)
envoltoria_convexa = gdf.geometry.unary_union.convex_hull
print(list(envoltoria_convexa.exterior.coords))

# Cria o dicionário no formato GeoJSON
geojson = {
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "properties": {
                "name": "MR ABELARDO LUZ",
                "description": "MR ABELARDO LUZ"
            },
            "geometry": {
                "type": "Polygon",
                "coordinates": [list(envoltoria_convexa.exterior.coords)]
            }
        }
    ]
}

# Exibe o JSON resultante
#print(json.dumps(geojson, indent=2))

# Salva o resultado em um arquivo .json
with open('regiao_cidades.json', 'w') as f:
    json.dump(geojson, f, indent=2)
