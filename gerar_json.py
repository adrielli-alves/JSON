import geopandas as gpd
from shapely.geometry import Point
import json
 
# Lista de coordenadas das cidades
coordenadas = [[-49.9710608993, -28.4386876317], [-49.9663657651, -28.4550241098], [-49.9583806599, -28.4492224991], [-49.9518383601, -28.4499627504], [-49.9507358922, -28.4659744192], [-49.9437252851, -28.4819696918], [-49.928081438, -28.4703424392], [-49.9302540649, -28.463142154], [-49.9375028505, -28.4579863544], [-49.9282463691, -28.4506638404], [-49.9143416037, -28.4590698749], [-49.8999171444, -28.4635481899], [-49.8881495309, -28.4575990961], [-49.8971622111, -28.4445164884], [-49.8925909547, -28.4395853292], [-49.887487286, -28.441447977], [-49.8825761771, -28.4469257507], [-49.8708193073, -28.4406107711], [-49.8594783811, -28.4416300425], [-49.8543385324, -28.443511024], [-49.8584513544, -28.4485789862], [-49.8722092449, -28.4503081984], [-49.8769160122, -28.4541835975], [-49.8631850749, -28.4624109416], [-49.863384774, -28.4732408807], [-49.8688623133, -28.4802160765], [-49.8658609309, -28.4872168958], [-49.8409070919, -28.4843875263], [-49.8449510144, -28.4928190838], [-49.839325279, -28.4957566501], [-49.8254196497, -28.4777473439], [-49.8105432173, -28.4833542331], [-49.8155387532, -28.4779289107], [-49.8164737522, -28.4686333464], [-49.8100843843, -28.4673801641], [-49.8023274369, -28.4834310396], [-49.7908324547, -28.4947465217], [-49.782915172, -28.4957728219], [-49.780558506, -28.4941042176], [-49.7855230852, -28.4877133594], [-49.7779455295, -28.4753787863], [-49.781334367, -28.471693423], [-49.7725706131, -28.4668530333], [-49.7681881161, -28.4590787104], [-49.7642271702, -28.4595656055], [-49.7649907716, -28.4823689927], [-49.770534079, -28.4924877592], [-49.7622150881, -28.5017116183], [-49.7448620128, -28.4934340606], [-49.7393156124, -28.4995581705], [-49.7435661071, -28.5064517294], [-49.736696824, -28.5101234077], [-49.7361424055, -28.511605192], [-49.7287205778, -28.5141861101], [-49.7266049935, -28.5187837936], [-49.7462737499, -28.5357618354], [-49.7484997967, -28.5451597153], [-49.7299878676, -28.5515575157], [-49.7249842415, -28.5694763998], [-49.719456865, -28.5764764735], [-49.7110028959, -28.5728910335], [-49.7076893089, -28.5826441887], [-49.7122080159, -28.5937238785], [-49.7093812931, -28.6042140144], [-49.6984462285, -28.6062069372], [-49.6911425247, -28.6184645806], [-49.6930996644, -28.6245275354], [-49.7025646911, -28.6284949966], [-49.7041903742, -28.629055453], [-49.7069068595, -28.63027021], [-49.7057184663, -28.6273920756], [-49.7150999499, -28.6235956336], [-49.7277754733, -28.6229274497], [-49.7541786493, -28.6284738146], [-49.7577312454, -28.6150644957], [-49.7716020435, -28.6275337255], [-49.7804161028, -28.6297918447], [-49.7845748645, -28.6222214843], [-49.7820510662, -28.6109118232], [-49.7881011056, -28.6127708559], [-49.7939427498, -28.6153700771], [-49.8022059985, -28.628792469], [-49.8076423106, -28.62949563], [-49.8087019221, -28.6353188767], [-49.8168372407, -28.6401666006], [-49.814215881, -28.6491594701], [-49.8179373435, -28.6536115009], [-49.8087638388, -28.6537329799], [-49.812270892, -28.6580406874], [-49.8221144404, -28.6615201118], [-49.8290811116, -28.6685630123], [-49.8370659747, -28.6666928062], [-49.8394582869, -28.6768311197], [-49.8349062648, -28.6788068949], [-49.8356951925, -28.6848623038], [-49.8334561102, -28.6878829807], [-49.8226954992, -28.6877536826], [-49.8202682115, -28.6934342885], [-49.831626723, -28.6944570584], [-49.8386603056, -28.701761196], [-49.8405345923, -28.7072822989], [-49.8357065266, -28.7081278082], [-49.8390616743, -28.7144728783], [-49.8395702484, -28.7144056046], [-49.8428207459, -28.7131647059], [-49.8459199866, -28.7049787799], [-49.8627856489, -28.7025808708], [-49.8599686319, -28.6995693131], [-49.8711701455, -28.7038528907], [-49.8682742298, -28.7036204748], [-49.8665820014, -28.7095136747], [-49.870031753, -28.7139968278], [-49.8658323291, -28.7150013187], [-49.8702159907, -28.7207392346], [-49.8657075862, -28.7206629949], [-49.8796791596, -28.7358102006], [-49.8751712078, -28.7444018964], [-49.888124524, -28.7462041618], [-49.8868840314, -28.7401459317], [-49.8913536514, -28.7391418376], [-49.8845195183, -28.7294538915], [-49.8812497254, -28.7209607096], [-49.8847937015, -28.7180779556], [-49.8938833149, -28.7242671155], [-49.904230393, -28.7198391836], [-49.9141515222, -28.7244330679], [-49.908452955, -28.7151625118], [-49.9047386419, -28.7068140389], [-49.9135060168, -28.7153150138], [-49.9249526367, -28.7184962403], [-49.9348942826, -28.727627821], [-49.9305326977, -28.7400735313], [-49.9215099646, -28.7456668877], [-49.9278970629, -28.7512284039], [-49.9275367, -28.7556506533], [-49.936427531, -28.7585723088], [-49.9496215159, -28.7547454678], [-49.9456417932, -28.7654316585], [-49.9473779192, -28.7699726674], [-49.9510938748, -28.7679934744], [-49.9562871622, -28.7708158684], [-49.9538263886, -28.7762152804], [-49.9585261784, -28.7788264311], [-49.9523969572, -28.7836088713], [-49.9561913737, -28.7909866104], [-49.9528454492, -28.7971560185], [-49.9471402351, -28.7978889086], [-49.9464392123, -28.805742109], [-49.9623170437, -28.8011469697], [-49.962191995, -28.8094284068], [-49.9686113372, -28.8226951801], [-49.9694849585, -28.8285889033], [-49.9607924809, -28.8322192065], [-49.9637756804, -28.8588226418], [-49.9716365942, -28.8802600287], [-49.9685301531, -28.8806214185], [-49.9546864202, -28.874776677], [-49.9583940625, -28.8827412269], [-49.9587662293, -28.8953354505], [-49.9739811141, -28.9015038191], [-49.9779620504, -28.8973479446], [-49.9882227818, -28.8966793513], [-49.9909661196, -28.8918753226], [-49.9955047656, -28.8933301389], [-49.9993952522, -28.8876237319], [-50.0079517338, -28.8889187366], [-50.0140763331, -28.8684840124], [-50.0201764985, -28.8693947382], [-50.0222339079, -28.861861941], [-50.0291562317, -28.8575178856], [-50.0362154701, -28.8592445055], [-50.0361524185, -28.853912696], [-50.0436410258, -28.8485292535], [-50.0378832278, -28.8445416493], [-50.0512240754, -28.8457504835], [-50.0594057693, -28.8381822214], [-50.0652015116, -28.8400326148], [-50.0704843712, -28.8373172343], [-50.0730784661, -28.8419730241], [-50.0873011247, -28.8476383568], [-50.0858417653, -28.8315083441], [-50.0936586999, -28.8321950348], [-50.0975988032, -28.8276581592], [-50.1053837219, -28.829362416], [-50.1121826798, -28.8233800043], [-50.1276207423, -28.8200546558], [-50.1371554448, -28.825527163], [-50.136937973, -28.8329058876], [-50.1399329141, -28.8331726167], [-50.1399395113, -28.8267791194], [-50.1570860557, -28.8199927423], [-50.1607362483, -28.8221132958], [-50.1581561512, -28.8265466965], [-50.1616155774, -28.8308246161], [-50.1574963608, -28.8355945437], [-50.1637573408, -28.8393879524], [-50.1677985936, -28.8330791214], [-50.1739216424, -28.8310159463], [-50.179719245, -28.8335563975], [-50.1807447233, -28.8235084294], [-50.1911042598, -28.8237854999], [-50.1965917528, -28.8264534686], [-50.1981524686, -28.831566565], [-50.1931577645, -28.8394194245], [-50.1981807644, -28.8427591919], [-50.1973970708, -28.847781065], [-50.2069433928, -28.846660768], [-50.2057446797, -28.8414731939], [-50.2162991796, -28.8345218298], [-50.2073642545, -28.8298491492], [-50.2113642231, -28.8224156687], [-50.2110692322, -28.810843265], [-50.2024192613, -28.808344844], [-50.1961568993, -28.795017739], [-50.1998808134, -28.7942888444], [-50.1971893951, -28.7897865404], [-50.2030516212, -28.7832698181], [-50.1973969474, -28.7832560493], [-50.1994232717, -28.7804751529], [-50.1959888729, -28.7789745575], [-50.1841295673, -28.7478714136], [-50.1619249911, -28.7216755618], [-50.1582240184, -28.7117136114], [-50.1510989171, -28.7102668553], [-50.1471296915, -28.7121167732], [-50.1275555838, -28.689718257], [-50.1190779416, -28.6884079218], [-50.1023319124, -28.6775093167], [-50.0973250491, -28.6680799362], [-50.109646707, -28.6447752157], [-50.0943102041, -28.6366262494], [-50.0216004828, -28.6349341735], [-50.0368674699, -28.6191654043], [-50.0403970631, -28.6045712629], [-50.0384763602, -28.5930395983], [-50.02503703, -28.5723721687], [-50.0314670791, -28.5632137731], [-50.0481712045, -28.5675481916], [-50.0481925552, -28.5595432671], [-50.0569026732, -28.5369832855], [-50.0576530196, -28.5235448964], [-50.0641039975, -28.5108752158], [-50.0721788934, -28.5075796527], [-50.0665217606, -28.4911309678], [-50.0681602116, -28.4786993503], [-50.0601269907, -28.4751870757], [-50.0358526667, -28.4773825599], [-50.0251106334, -28.4707995516], [-50.019136318, -28.4511052645], [-50.0158889956, -28.4496902477], [-50.0124147296, -28.4503482725], [-50.0022448498, -28.4568536377], [-49.9871337724, -28.4554552265], [-49.9880090743, -28.4443813568], [-49.9710608993, -28.4386876317]]


# Cria um GeoDataFrame a partir das coordenadas das cidades
pontos = [Point(lon, lat) for lon, lat in coordenadas]
gdf = gpd.GeoDataFrame(geometry=pontos)

# Calcula a envoltória convexa (convex hull)
envoltoria_convexa = gdf.geometry.unary_union.convex_hull
print(list(envoltoria_convexa.exterior.coords))

# Cria o dicionário no formato GeoJSON
geojson = {
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "properties": {
                "name": "MR ABELARDO LUZ",
                "description": "MR ABELARDO LUZ"
            },
            "geometry": {
                "type": "Polygon",
                "coordinates": [list(envoltoria_convexa.exterior.coords)]
            }
        }
    ]
}

# Exibe o JSON resultante
#print(json.dumps(geojson, indent=2))

# Salva o resultado em um arquivo .json
with open('regiao_cidades.json', 'w') as f:
    json.dump(geojson, f, indent=2)
